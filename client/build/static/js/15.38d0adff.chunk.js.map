{"version":3,"sources":["components/nav/AdminNav.js","functions/product.js","components/forms/FileUpload.js","components/forms/ProductUpdateForm.js","pages/admin/product/ProductUpdate.js"],"names":["AdminNav","className","to","getProductsByCount","axios","create","count","a","get","process","REACT_APP_API","getProduct","slug","removeProduct","authtoken","delete","data","createProduct","product","post","updateProduct","put","getProducts","sort","order","page","getproductsCount","productStar","productId","star","getRelated","fetchProductsByFilter","arg","FileUpload","values","setValues","setLoading","user","useSelector","state","images","map","imag","onClick","public_id","console","log","filteredImages","filter","item","token","then","res","catch","err","handleImageRemove","style","cursor","shape","src","url","size","type","multiple","accept","hidden","onChange","e","target","files","allUploadedFiles","i","length","Resizer","imageFileResizer","uri","image","push","Option","Select","ProductUpdateForm","handleChange","categories","selectedCategory","handleSubmit","handleCategoryChange","arrayOfSubs","setArrayOfSubIds","subOptions","title","description","price","category","shipping","subs","quantity","colors","brands","color","brand","onSubmit","name","value","c","b","_id","mode","width","placeholder","s","initState","ProductUpdate","match","history","useState","setSubOptions","setCategories","setSelectedCategory","loading","params","useEffect","loadProduct","loadCategories","p","getCategorySubs","arr","prev","getCategories","LoadingOutlined","preventDefault","toast","success","error","response"],"mappings":"6HAuCeA,IAnCE,kBACf,8BACM,qBAAIC,UAAU,kBAAd,UACI,oBAAIA,UAAY,WAAhB,SACI,cAAC,IAAD,CAAMC,GAAG,mBAAmBD,UAAU,WAAtC,yBAGJ,oBAAIA,UAAY,WAAhB,SACI,cAAC,IAAD,CAAMC,GAAG,iBAAiBD,UAAU,WAApC,uBAGJ,oBAAIA,UAAY,WAAhB,SACI,cAAC,IAAD,CAAMC,GAAG,kBAAkBD,UAAU,WAArC,wBAGJ,oBAAIA,UAAY,WAAhB,SACI,cAAC,IAAD,CAAMC,GAAG,kBAAkBD,UAAU,WAArC,wBAGJ,oBAAIA,UAAY,WAAhB,SACI,cAAC,IAAD,CAAMC,GAAG,aAAaD,UAAU,WAAhC,4BAGJ,oBAAIA,UAAY,WAAhB,SACI,cAAC,IAAD,CAAMC,GAAG,gBAAgBD,UAAU,WAAnC,uBAGJ,oBAAIA,UAAY,WAAhB,SACI,cAAC,IAAD,CAAMC,GAAG,iBAAiBD,UAAU,WAApC,+B,maC7BHE,GAFIC,IAAMC,SAEQ,uCAAG,WAAOC,GAAP,SAAAC,EAAA,sEACnBH,IAAMI,IAAN,UACJC,mIAAYC,cADR,qBACkCJ,IAFf,mFAAH,uDAOlBK,EAAU,uCAAG,WAAOC,GAAP,SAAAL,EAAA,sEACXH,IAAMI,IAAN,UACJC,mIAAYC,cADR,oBACiCE,IAFtB,mFAAH,sDAOVC,EAAa,uCAAG,WAAOD,EAAKE,GAAZ,SAAAP,EAAA,sEACdH,IAAMW,OAAN,UACJN,mIAAYC,cADR,oBACiCE,GACxC,CAAEI,KAAM,CAACF,eAHY,mFAAH,wDAgBbG,EAAa,uCAAG,WAAQC,EAAQJ,GAAhB,SAAAP,EAAA,sEACdH,IAAMe,KAAN,UACJV,mIAAYC,cADR,YAEP,CAACI,YAAUI,YAHU,mFAAH,wDAObE,EAAa,uCAAG,WAAOR,EAAMM,EAAQJ,GAArB,SAAAP,EAAA,sEACdH,IAAMiB,IAAN,UACJZ,mIAAYC,cADR,oBACiCE,GACxC,CAAEE,YAAWI,YAHQ,mFAAH,0DAMbI,EAAW,uCAAG,WAAQC,EAAOC,EAAQC,GAAvB,SAAAlB,EAAA,sEACZH,IAAMe,KAAN,UACJV,mIAAYC,cADR,aAEP,CAACa,OAAOC,QAAQC,SAHG,mFAAH,0DAMXC,EAAgB,uCAAG,sBAAAnB,EAAA,sEACjBH,IAAMI,IAAN,UACJC,mIAAYC,cADR,oBADiB,mFAAH,qDAMhBiB,EAAW,uCAAG,WAAOC,EAAWC,EAAKf,GAAvB,SAAAP,EAAA,sEACZH,IAAMiB,IAAN,UACJZ,mIAAYC,cADR,yBACsCkB,GAC7C,CAAEd,YAAWe,SAHM,mFAAH,0DAOXC,EAAU,uCAAG,WAAOF,GAAP,SAAArB,EAAA,sEACXH,IAAMI,IAAN,UACJC,mIAAYC,cADR,6BAC0CkB,IAF/B,mFAAH,sDAMDG,EAAqB,uCAAG,WAAOC,GAAP,SAAAzB,EAAA,sEACvBH,IAAMe,KAAN,UACJV,mIAAYC,cADR,mBACyCsB,GAFlB,mFAAH,uD,wHCW5BC,IA3EI,SAAC,GAAqC,IAApCC,EAAmC,EAAnCA,OAAQC,EAA2B,EAA3BA,UAAWC,EAAgB,EAAhBA,WAE/BC,EAAQC,aAAY,SAACC,GAAD,sBAAgBA,MAApCF,KAwDP,OACE,qCACE,qBAAKpC,UAAU,MAAf,SACKiC,EAAOM,OAAOC,KAAI,SAACC,GAAD,OACjB,cAAC,IAAD,CAAOpC,MAAM,IAAyBqC,QAAS,kBAzB/B,SAACC,GACzBR,GAAW,GACXS,QAAQC,IAAI,eAAgBF,GAFW,IAInCG,EADab,EAAVM,OACqBQ,QAAO,SAACC,GAClC,OAAOA,EAAKL,YAAcA,KAE5BT,EAAU,2BAAID,GAAL,IAAaM,OAAQO,KAC9B3C,IAAMe,KAAN,UAAcV,mIAAYC,cAA1B,gBAAsD,CAACkC,YAAW9B,UAAWuB,EAAMA,EAAKa,MAAO,KAC9FC,MAAK,SAACC,GACLP,QAAQC,IAAI,+BACZV,GAAW,MAGZiB,OAAM,SAACC,GACNlB,GAAW,GACXS,QAAQC,IAAI,4BAA6BQ,MASkBC,CAAkBb,EAAKE,YAAYY,MAAO,CAACC,OAAQ,WAAxG,SACA,cAAC,IAAD,CAAQC,MAAM,SAASC,IAAKjB,EAAKkB,IAAKC,KAAM,IAAK5D,UAAU,UADrCyC,EAAKE,gBAKjC,qBAAK3C,UAAU,MAAf,SACE,wBAAOA,UAAU,2BAAjB,kCACA,uBAAO6D,KAAK,OAAOC,UAAQ,EAACC,OAAO,WAAWC,QAAM,EAACC,SAjE/B,SAACC,GAE3BtB,QAAQC,IAAIqB,EAAEC,OAAOC,OAErB,IAAIA,EAAQF,EAAEC,OAAOC,MACjBC,EAAmBpC,EAAOM,OAG9B,GAAI6B,EAAO,CACTjC,GAAW,GACX,IAAK,IAAImC,EAAE,EAAGA,EAAGF,EAAMG,OAAQD,IAC7BE,IAAQC,iBAAiBL,EAAME,GAAG,IAAI,IAAI,OAAQ,IAAK,GAAG,SAACI,GAEzD9B,QAAQC,IAAI,cAAe6B,EAAM,yBACjCvE,IAAMe,KAAN,UAAcV,mIAAYC,cAA1B,iBAAwD,CAACkE,MAAOD,EAAK7D,UAAWuB,EAAMA,EAAKa,MAAO,KACjGC,MAAK,SAAAC,GACJP,QAAQC,IAAI,6BAA8BM,GAC1ChB,GAAW,GACXkC,EAAiBO,KAAKzB,EAAIpC,MAC1BmB,EAAU,2BAAID,GAAL,IAAaM,OAAS8B,QAEhCjB,OAAM,SAAAC,GACLlB,GAAW,GACXS,QAAQC,IAAI,gCAEb,wB,wJCjCJgC,EAAUC,IAAVD,OA4IQE,EA1IW,SAAC,GAAkJ,IAAjJC,EAAgJ,EAAhJA,aAAcC,EAAkI,EAAlIA,WAAYC,EAAsH,EAAtHA,iBAAkBC,EAAoG,EAApGA,aAAwBC,GAA4E,EAAvFlD,UAAuF,EAA5EkD,sBAAsBC,EAAsD,EAAtDA,YAAaC,EAAyC,EAAzCA,iBAAkBC,EAAuB,EAAvBA,WAAYtD,EAAW,EAAXA,OAG3JuD,EAWUvD,EAXVuD,MACAC,EAUUxD,EAVVwD,YACAC,EASUzD,EATVyD,MACAC,EAQU1D,EARV0D,SAEAC,GAMU3D,EAPV4D,KAOU5D,EANV2D,UACAE,EAKU7D,EALV6D,SAEAC,GAGU9D,EAJVM,OAIUN,EAHV8D,QACAC,EAEU/D,EAFV+D,OACAC,EACUhE,EADVgE,MACAC,EAAUjE,EAAViE,MAEJ,OACE,uBAAMC,SAAUhB,EAAhB,UACM,sBAAKnF,UAAU,aAAf,UACI,0CACA,uBACM6D,KAAK,OACLuC,KAAK,QACLpG,UAAU,eACVqG,MAAOb,EACPvB,SAAUe,OAIpB,sBAAKhF,UAAU,aAAf,UACI,gDACA,uBACM6D,KAAK,OACLuC,KAAK,cACLpG,UAAU,eACVqG,MAAOZ,EACPxB,SAAUe,OAIpB,sBAAKhF,UAAU,aAAf,UACI,0CACA,uBACM6D,KAAK,SACLuC,KAAK,QACLpG,UAAU,eACVqG,MAAOX,EACPzB,SAAUe,OAIpB,sBAAKhF,UAAU,aAAf,UACI,6CACA,yBACIoG,KAAK,WACLpG,UAAU,eACViE,SAAUe,EACVqB,MAAoB,QAAbT,EAAqB,MAAQ,KAJxC,UAKI,wBAAQS,MAAM,KAAd,gBACA,wBAAQA,MAAM,MAAd,uBAIR,sBAAKrG,UAAU,aAAf,UACI,6CACA,uBACM6D,KAAK,SACLuC,KAAK,WACLpG,UAAU,eACVqG,MAAOP,EACP7B,SAAUe,OAIpB,sBAAKhF,UAAU,aAAf,UACI,0CACA,wBACIoG,KAAK,QACLpG,UAAU,eACViE,SAAUe,EACVqB,MAAOJ,EAJX,SAKKF,EAAOvD,KAAI,SAAC8D,GAAD,OAAO,wBAAgBD,MAAOC,EAAvB,SAA2BA,GAAdA,WAIxC,sBAAKtG,UAAU,aAAf,UACI,0CACA,wBACIoG,KAAK,QACLpG,UAAU,eACViE,SAAUe,EACVqB,MAAOH,EAJX,SAKKF,EAAOxD,KAAI,SAAC+D,GAAD,OAAO,wBAAgBF,MAAOE,EAAvB,SAA2BA,GAAdA,WAIxC,sBAAKvG,UAAU,aAAf,UACE,6CACA,wBACIoG,KAAK,WACLpG,UAAU,eACViE,SAAUmB,EACViB,MAAOnB,GAAsCS,EAASa,IAJ1D,SAKKvB,EAAWV,OAAQ,GAClBU,EAAWzC,KAAI,SAAC8D,GAAD,OACb,wBAAoBD,MAAOC,EAAEE,IAA7B,SACKF,EAAEF,MADME,EAAEE,aASzB,gCACE,mDACC,cAAC,IAAD,CACKC,KAAK,WACLlD,MAAO,CAACmD,MAAO,QACfC,YAAY,gBACZN,MAAOhB,EAEPpB,SAAU,SAAAoC,GAAK,OAAIf,EAAiBe,IANzC,SAQId,EAAWhB,QACVgB,EAAW/C,KAAI,SAACoE,GAAD,OACb,eAAC/B,EAAD,CAAoBwB,MAAOO,EAAEJ,IAA7B,UACKI,EAAER,KADP,SAAaQ,EAAEJ,aAKzB,uBACA,wBAAQxG,UAAU,0BAAlB,wBC7HJ6G,EAAY,CACdrB,MAAO,GACPC,YAAa,GACbC,MAAO,GACPC,SAAU,GACVE,KAAM,GACND,SAAU,GACVE,SAAU,GACVvD,OAAQ,GACRwD,OAAQ,CAAC,QAAS,QAAS,SAAU,OAAQ,SAC7CC,OAAQ,CAAC,QAAS,YAAa,UAAW,SAAU,QACpDC,MAAO,GACPC,MAAO,IAkJIY,UA5IO,SAAC,GAAuB,IAAtBC,EAAqB,EAArBA,MAAQC,EAAa,EAAbA,QAAa,EAIbC,mBAASJ,GAJI,mBAIlC5E,EAJkC,KAI1BC,EAJ0B,OAKL+E,mBAAS,IALJ,mBAKlC1B,EALkC,KAKtB2B,EALsB,OAMLD,mBAAS,IANJ,mBAMlChC,EANkC,KAMtBkC,EANsB,OAODF,mBAAS,IAPR,mBAOlC5B,EAPkC,KAOrBC,EAPqB,OAQO2B,qBARP,mBAQlC/B,EARkC,KAQhBkC,EARgB,OASXH,oBAAS,GATE,mBASlCI,EATkC,KASzBlF,EATyB,KAWlCC,EAAQC,aAAY,SAACC,GAAD,sBAAgBA,MAApCF,KAEAzB,EAAQoG,EAAMO,OAAd3G,KAGP4G,qBAAU,WACRC,IACAC,MACA,IAEN,IAAMD,EAAc,WACjB9G,YAAWC,GACVuC,MAAK,SAAAwE,GAGJxF,EAAU,2BAAID,GAAWyF,EAAE3G,OAE3B4G,YAAgBD,EAAE3G,KAAK4E,SAASa,KAC/BtD,MAAK,SAAAC,GACJ+D,EAAc/D,EAAIpC,SAGpB,IAAI6G,EAAM,GACVF,EAAE3G,KAAK8E,KAAKrD,KAAI,SAACoE,GACfgB,EAAIhD,KAAKgC,EAAEJ,QAGblB,GAAiB,SAACuC,GAAD,OAAUD,SAIzBH,EAAiB,kBAClBK,cAAgB5E,MAAK,SAACoD,GAEtBa,EAAcb,EAAEvF,UA4DpB,OACE,qBAAKf,UAAU,kBAAf,SACE,sBAAKA,UAAU,MAAf,UACI,qBAAKA,UAAU,WAAf,SACI,cAACD,EAAA,EAAD,MAEJ,sBAAKC,UAAU,MAAf,UACCqH,EAAS,cAACU,EAAA,EAAD,CAAiB/H,UAAU,wBAA0B,gDAC3D,uBAGA,qBAAKA,UAAU,MAAf,SACE,cAACgC,EAAA,EAAD,CAAYC,OAAQA,EAAQC,UAAWA,EAAWC,WAAYA,MAGhE,cAAE,EAAF,CACQ6C,aAlDG,SAACd,GAEpBhC,EAAU,2BAAID,GAAL,kBAAciC,EAAEC,OAAOiC,KAAOlC,EAAEC,OAAOkC,UAiDhClB,aAzEG,SAACjB,GACpBA,EAAE8D,iBAEF7F,GAAW,GACXF,EAAO4D,KAAOR,EACdpD,EAAO0D,SAAWT,GAAsCjD,EAAO0D,SAG/DxE,YAAcR,EAAOsB,EAASG,EAAKa,OAClCC,MAAM,SAAAC,GACLhB,GAAW,GACX8F,IAAMC,QAAN,YAAmB/E,EAAIpC,KAAKyE,MAA5B,iBACAwB,EAAQpC,KAAK,sBAEdxB,OAAM,SAACC,GACNT,QAAQC,IAAIQ,GACZlB,GAAW,GACX8F,IAAME,MAAM9E,EAAI+E,SAASrH,KAAKsC,SAyDhB+B,qBA9CW,SAAClB,GAC5BA,EAAE8D,iBACFpF,QAAQC,IAAI,mBAAoBqB,EAAEC,OAAOkC,OACzCnE,EAAU,2BAAID,GAAL,IAAa4D,KAAM,MAE5BuB,EAAoBlD,EAAEC,OAAOkC,OAE7BsB,YAAgBzD,EAAEC,OAAOkC,OACxBnD,MAAK,SAAAC,GACJP,QAAQC,IAAI,0BAA2BM,GACvC+D,EAAc/D,EAAIpC,SAGpB6B,QAAQC,IAAI,oCAAqCZ,EAAO0D,UAKpD1D,EAAO0D,SAASa,MAAQtC,EAAEC,OAAOkC,OACrCmB,IAGAlC,EAAiB,KAyBDC,WAAYA,EAEZN,WAAYA,EACZ/C,UAAWA,EACXmD,YAAeA,EACfC,iBAAoBA,EACpBrD,OAAQA,EACRiD,iBAAoBA,IAE9B","file":"static/js/15.38d0adff.chunk.js","sourcesContent":["import React from 'react';\r\nimport {Link} from 'react-router-dom';\r\n\r\n\r\nconst AdminNav = () => (\r\n  <nav>\r\n        <ul className=\"nav flex-column\">\r\n            <li className = 'nav-item'>\r\n                <Link to='/admin/dashboard' className='nav-link'>Dashboard</Link>\r\n            </li>\r\n\r\n            <li className = 'nav-item'>\r\n                <Link to='/admin/product' className='nav-link'>Product</Link>\r\n            </li>\r\n\r\n            <li className = 'nav-item'>\r\n                <Link to='/admin/products' className='nav-link'>Products</Link>\r\n            </li>\r\n\r\n            <li className = 'nav-item'>\r\n                <Link to='/admin/category' className='nav-link'>Category</Link>\r\n            </li>\r\n\r\n            <li className = 'nav-item'>\r\n                <Link to='/admin/sub' className='nav-link'>Sub Category</Link>\r\n            </li>\r\n\r\n            <li className = 'nav-item'>\r\n                <Link to='/admin/coupon' className='nav-link'>Coupons</Link>\r\n            </li>\r\n\r\n            <li className = 'nav-item'>\r\n                <Link to='/user/password' className='nav-link'>Password</Link>\r\n            </li>\r\n        </ul>\r\n  </nav>\r\n);\r\n\r\n\r\nexport default AdminNav;\r\n","import axios from 'axios';\r\nconst instance = axios.create();\r\n\r\nexport const getProductsByCount = async (count) => {\r\n  return await axios.get(\r\n        `${process.env.REACT_APP_API}/products/${count}`\r\n      )\r\n};\r\n\r\n\r\nexport const getProduct = async (slug) => {\r\n  return await axios.get(\r\n        `${process.env.REACT_APP_API}/product/${slug}`\r\n      )\r\n};\r\n\r\n\r\nexport const removeProduct = async (slug,authtoken) => {\r\n  return await axios.delete(\r\n        `${process.env.REACT_APP_API}/product/${slug}`,\r\n        { data: {authtoken} }\r\n      )\r\n};\r\n//\r\n//\r\n// export const updateCategory = async (slug,category,authtoken) => {\r\n//   return await axios.put(\r\n//         `${process.env.REACT_APP_API}/category/${slug}`,\r\n//         {authtoken, category}\r\n//       )\r\n// };\r\n\r\n\r\nexport const createProduct = async ( product,authtoken) => {\r\n  return await axios.post(\r\n        `${process.env.REACT_APP_API}/product`,\r\n        {authtoken,product}   \r\n      )\r\n};\r\n\r\nexport const updateProduct = async (slug, product,authtoken) => {\r\n  return await axios.put(\r\n        `${process.env.REACT_APP_API}/product/${slug}`, \r\n        { authtoken ,product })};\r\n\r\n\r\nexport const getProducts = async ( sort , order , page) => {\r\n  return await axios.post(\r\n        `${process.env.REACT_APP_API}/products`,\r\n        {sort , order , page}   \r\n        )};\r\n\r\nexport const getproductsCount = async () => {\r\n  return await axios.get(\r\n        `${process.env.REACT_APP_API}/products/total`\r\n          )};\r\n\r\n\r\nexport const productStar = async (productId, star,authtoken) => {\r\n  return await axios.put(\r\n        `${process.env.REACT_APP_API}/product/star/${productId}`, \r\n        { authtoken ,star }\r\n        )};\r\n\r\n\r\nexport const getRelated = async (productId) => {\r\n  return await axios.get(\r\n        `${process.env.REACT_APP_API}/products/related/${productId}`\r\n         )};\r\n\r\n\r\n         export const fetchProductsByFilter = async (arg) => {\r\n          return await axios.post(\r\n                `${process.env.REACT_APP_API}/search/filters` , arg\r\n              )\r\n        };         ","import React from 'react';\r\nimport Resizer from 'react-image-file-resizer';\r\nimport axios from 'axios';\r\nimport {useSelector} from 'react-redux';\r\nimport {Avatar ,Badge} from 'antd';\r\n\r\n\r\nconst FileUpload = ({values, setValues, setLoading}) => {\r\n\r\n  const {user} = useSelector((state) => ({...state}));\r\n\r\n  const fileUploadAndResize = (e) => {\r\n    // steps\r\n    console.log(e.target.files);\r\n    // resize\r\n    let files = e.target.files;\r\n    let allUploadedFiles = values.images;\r\n\r\n\r\n    if (files) {\r\n      setLoading(true);\r\n      for (let i=0; i< files.length; i++){\r\n        Resizer.imageFileResizer(files[i],720,720,'JPEG', 100, 0, (uri) => {\r\n          //\r\n          console.log(\"###########\", uri , \"#####################\");\r\n          axios.post(`${process.env.REACT_APP_API}/uploadimages`, {image: uri, authtoken :user? user.token: '' ,})\r\n          .then(res => {\r\n            console.log('IMAGE UPLOAD RESPONSE DATA', res);\r\n            setLoading(false);\r\n            allUploadedFiles.push(res.data);\r\n            setValues({...values, images : allUploadedFiles});\r\n          })\r\n          .catch(err => {\r\n            setLoading(false);\r\n            console.log('CLOUDINARY UPLOAD ERROR');\r\n          })\r\n        }, 'base64'\r\n      )\r\n      }\r\n    }\r\n\r\n  }\r\n\r\n\r\n  const handleImageRemove = (public_id) => {\r\n    setLoading(true);\r\n    console.log('remove image', public_id);\r\n    const {images} = values;\r\n    let filteredImages = images.filter((item) => {\r\n      return item.public_id !== public_id;\r\n    });\r\n    setValues({...values, images: filteredImages});\r\n    axios.post(`${process.env.REACT_APP_API}/removeimage`,{public_id, authtoken :user? user.token: '' ,})\r\n    .then((res) => {\r\n      console.log(\"THEN WORKED IN IMAGE REMOVE\");\r\n      setLoading(false);\r\n\r\n    })\r\n    .catch((err) => {\r\n      setLoading(false);\r\n      console.log('Cloudinary Frontend error', err);\r\n    })\r\n  }\r\n\r\n\r\n  return (\r\n    <>\r\n      <div className='row'>\r\n          {values.images.map((imag) => (\r\n            <Badge count='X' key={imag.public_id} onClick={() => handleImageRemove(imag.public_id)} style={{cursor: 'pointer'}}>\r\n            <Avatar shape='square' src={imag.url} size={100} className='ml-3' />\r\n            </Badge>\r\n          ))}\r\n      </div>\r\n      <div className='row'>\r\n        <label className='btn btn-info btn-raised '>Choose file to upload\r\n        <input type='file' multiple accept='images/*' hidden onChange={fileUploadAndResize} />\r\n        </label>\r\n      </div>\r\n  </>\r\n)}\r\n\r\nexport default FileUpload;\r\n","import React from 'react';\r\nimport  {Select} from 'antd';\r\n\r\nconst {Option} = Select;\r\n\r\nconst ProductUpdateForm = ({handleChange, categories ,selectedCategory, handleSubmit,setValues, handleCategoryChange, arrayOfSubs, setArrayOfSubIds, subOptions, values}) =>{\r\n  //Destructurung\r\n  const {\r\n      title,\r\n      description,\r\n      price,\r\n      category, \r\n      subs,\r\n      shipping,\r\n      quantity,\r\n      images,\r\n      colors,\r\n      brands ,\r\n      color,\r\n      brand } = values;\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit}>\r\n          <div className='form-group'>\r\n              <label>Title</label>\r\n              <input\r\n                    type='text'\r\n                    name='title'\r\n                    className='form-control'\r\n                    value={title}\r\n                    onChange={handleChange}\r\n                 />\r\n          </div>\r\n\r\n          <div className='form-group'>\r\n              <label>Description</label>\r\n              <input\r\n                    type='text'\r\n                    name='description'\r\n                    className='form-control'\r\n                    value={description}\r\n                    onChange={handleChange}\r\n                 />\r\n          </div>\r\n\r\n          <div className='form-group'>\r\n              <label>Price</label>\r\n              <input\r\n                    type='number'\r\n                    name='price'\r\n                    className='form-control'\r\n                    value={price}\r\n                    onChange={handleChange}\r\n                 />\r\n          </div>\r\n\r\n          <div className='form-group'>\r\n              <label>Shipping</label>\r\n              <select\r\n                  name='shipping'\r\n                  className=\"form-control\"\r\n                  onChange={handleChange}\r\n                  value={shipping === 'Yes' ? 'Yes' : 'No'}>\r\n                  <option value='No'>No</option>\r\n                  <option value='Yes'>Yes</option>\r\n              </select>\r\n          </div>\r\n\r\n          <div className='form-group'>\r\n              <label>Quantity</label>\r\n              <input\r\n                    type='number'\r\n                    name='quantity'\r\n                    className='form-control'\r\n                    value={quantity}\r\n                    onChange={handleChange}\r\n                 />\r\n          </div>\r\n\r\n          <div className='form-group'>\r\n              <label>Color</label>\r\n              <select\r\n                  name='color'\r\n                  className=\"form-control\"\r\n                  onChange={handleChange}\r\n                  value={color}>\r\n                  {colors.map((c) => <option key={c} value={c}>{c}</option>)}\r\n              </select>\r\n          </div>\r\n\r\n          <div className='form-group'>\r\n              <label>Brand</label>\r\n              <select\r\n                  name='brand'\r\n                  className=\"form-control\"\r\n                  onChange={handleChange}\r\n                  value={brand}>\r\n                  {brands.map((b) => <option key={b} value={b}>{b}</option>)}\r\n              </select>\r\n          </div>\r\n\r\n          <div className='form-group'>\r\n            <label>Category</label>\r\n            <select\r\n                name='category'\r\n                className='form-control'\r\n                onChange={handleCategoryChange}\r\n                value={selectedCategory ? selectedCategory : category._id}>\r\n                {categories.length >0 &&\r\n                  categories.map((c) => (\r\n                    <option key={c._id} value={c._id}>\r\n                        {c.name}\r\n                    </option>\r\n                ))}\r\n            </select>\r\n          </div>\r\n\r\n\r\n\r\n          <div>\r\n            <label>Sub Categories</label>\r\n             <Select\r\n                  mode='multiple'\r\n                  style={{width: '100%'}}\r\n                  placeholder=\"Please Select\"\r\n                  value={arrayOfSubs}\r\n                  // multiple = {true}\r\n                  onChange={value => setArrayOfSubIds(value)}>\r\n\r\n                {subOptions.length &&\r\n                  subOptions.map((s) => (\r\n                    <Option key={s._id} value={s._id}>\r\n                        {s.name} :::\r\n                    </Option>))}\r\n            </Select>\r\n          </div>\r\n          <br/>\r\n          <button className='btn btn-outline-success'>Submit</button>\r\n    </form>\r\n  )\r\n}\r\n\r\n\r\nexport default ProductUpdateForm;\r\n","import React, {useState,useEffect} from 'react';\r\nimport AdminNav from '../../../components/nav/AdminNav';\r\nimport {toast} from 'react-toastify';\r\nimport {useSelector} from 'react-redux';\r\nimport { getProduct, updateProduct } from '../../../functions/product';\r\nimport {getCategories, getCategorySubs} from '../../../functions/category';\r\nimport FileUpload from '../../../components/forms/FileUpload';\r\nimport {LoadingOutlined} from '@ant-design/icons'\r\nimport ProductUpdateForm from '../../../components/forms/ProductUpdateForm';\r\nimport {useParams} from 'react-router-dom';\r\n\r\n\r\nconst initState = {\r\n    title: '',\r\n    description: '',\r\n    price: '',\r\n    category: '',\r\n    subs: [],\r\n    shipping: '',\r\n    quantity: '',\r\n    images: [],\r\n    colors: [\"Black\", 'Brown', \"Silver\", \"Blue\", 'White'],\r\n    brands: [\"Apple\", 'Microsoft', \"Samsung\", \"Lenovo\", 'ASUS'],\r\n    color: '',\r\n    brand: ''\r\n  }\r\n\r\n\r\n\r\n\r\nconst ProductUpdate = ({match , history}) => {\r\n\r\n\r\n//state\r\n    const [values, setValues] = useState(initState);\r\n    const [subOptions, setSubOptions] = useState([]);\r\n    const [categories, setCategories] = useState([]);\r\n    const [arrayOfSubs, setArrayOfSubIds] = useState([]);\r\n    const [selectedCategory, setSelectedCategory] = useState();\r\n    const [loading, setLoading] = useState(false);\r\n// redux\r\n    const {user} = useSelector((state) => ({...state}));\r\n//router\r\n    const {slug} = match.params;\r\n\r\n\r\n    useEffect(() => {\r\n      loadProduct();\r\n      loadCategories();\r\n    },[])\r\n\r\nconst loadProduct = () => {\r\n   getProduct(slug)\r\n   .then(p => {\r\n     // console.log('Single Product' ,p)\r\n     // 1 load single product\r\n     setValues({...values, ...p.data});\r\n     // 2 load single prodict category subs\r\n     getCategorySubs(p.data.category._id)\r\n     .then(res => {\r\n       setSubOptions(res.data) // on first load\r\n     })\r\n     // 3 prepare array of sub ids to show default sub values in antd design Select\r\n     let arr = []\r\n     p.data.subs.map((s) => {\r\n       arr.push(s._id)\r\n     })\r\n    //  console.log(\"ARR\", arr)\r\n     setArrayOfSubIds((prev) => arr) //& this special syntax we can replace existing prev values by new arr values  //required for ant design select to work\r\n   })\r\n }\r\n\r\n const loadCategories = () =>\r\n      getCategories().then((c) => {\r\n      // console.log(\"GET CATEGARY IN UPDATED PRODUCTS\" , c.data);\r\n      setCategories(c.data);\r\n      });  \r\n\r\n\r\n    const handleSubmit = (e) => { \r\n      e.preventDefault();\r\n      // console.log(\"@@@@@@@\" , e.target.value)\r\n      setLoading(true)\r\n      values.subs = arrayOfSubs;\r\n      values.category = selectedCategory ? selectedCategory : values.category;\r\n      // console.log(\"$$$$$$$$$$$$$$$$$$$$$$$$$\", values)\r\n\r\n      updateProduct(slug , values , user.token)\r\n      .then( res => {\r\n        setLoading(false);\r\n        toast.success(` \"${res.data.title}\" is updated`);\r\n        history.push('/admin/products');\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        setLoading(false);\r\n        toast.error(err.response.data.err);\r\n      })\r\n\r\n    };\r\n\r\n    const handleChange = (e) => {\r\n      //\r\n      setValues({...values, [e.target.name]: e.target.value })\r\n      // console.log(e.target.name, '-------------', e.target.value);\r\n    }\r\n\r\n    const handleCategoryChange = (e) => {\r\n      e.preventDefault();\r\n      console.log('CLICKED CATEGORY', e.target.value);\r\n      setValues({...values, subs: []});\r\n\r\n      setSelectedCategory(e.target.value);\r\n\r\n      getCategorySubs(e.target.value)\r\n      .then(res => {\r\n        console.log('Sub Options on Category', res);\r\n        setSubOptions(res.data);\r\n      });\r\n\r\n      console.log('Existing Category values.category', values.category);\r\n\r\n\r\n      // if user click back to the orignal category\r\n      // show its sub category in default\r\n      if (values.category._id === e.target.value) {\r\n      loadProduct();\r\n      }\r\n      // clear sub category when category is changed\r\n      setArrayOfSubIds([]);\r\n\r\n    }\r\n\r\n\r\n\r\n  return (\r\n    <div className='container-fluid'>\r\n      <div className='row'>\r\n          <div className='col-md-2'>\r\n              <AdminNav />\r\n          </div>\r\n          <div className='col'>\r\n          {loading? <LoadingOutlined className='text-danger h1 mt-2' /> :<h3>Product Update</h3>}\r\n              <hr />\r\n              {/* {JSON.stringify(values)} */}\r\n\r\n              <div className='p-3'>\r\n                <FileUpload values={values} setValues={setValues} setLoading={setLoading} />\r\n              </div>\r\n\r\n              < ProductUpdateForm\r\n                      handleChange={handleChange}\r\n                      handleSubmit={handleSubmit}\r\n                      handleCategoryChange={handleCategoryChange}\r\n                      subOptions={subOptions}\r\n                      // showSub={showSubs}\r\n                      categories={categories}\r\n                      setValues={setValues}\r\n                      arrayOfSubs = {arrayOfSubs}\r\n                      setArrayOfSubIds = {setArrayOfSubIds}  \r\n                      values={values}\r\n                      selectedCategory = {selectedCategory}\r\n              />\r\n            <hr />\r\n          </div>\r\n      </div>\r\n  </div>\r\n  )\r\n}\r\n\r\nexport default ProductUpdate;\r\n"],"sourceRoot":""}