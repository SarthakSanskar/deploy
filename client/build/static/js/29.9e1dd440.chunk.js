(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[29],{301:function(e,t,a){"use strict";a.r(t);var r=a(4),n=a(11),s=a.n(n),o=a(27),c=a(40),i=a(0),l=a(96),u=a(89),d=a(62),b=a(26),p=a.n(b);t.default=function(e){var t=e.history,a=Object(i.useState)(""),n=Object(c.a)(a,2),b=n[0],m=n[1],h=Object(i.useState)(""),f=Object(c.a)(h,2),j=f[0],O=f[1];Object(i.useEffect)((function(){m(localStorage.getItem("emailForRegistration"))}),[]);var g=Object(d.b)(),x=function(){var e=Object(o.a)(s.a.mark((function e(a){var r,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),b&&j){e.next=4;break}return u.b.error("Email and password is required"),e.abrupt("return");case 4:if(!(j.length<6)){e.next=7;break}return u.b.error("Password must be atleast 6 characters long"),e.abrupt("return");case 7:return e.prev=7,e.next=10,l.a.signInWithEmailLink(b,window.location.href);case 10:if(!e.sent.user.emailVerified){e.next=23;break}return window.localStorage.removeItem("emailForRegistration"),r=l.a.currentUser,e.next=16,r.updatePassword(j);case 16:return e.next=18,r.getIdTokenResult();case 18:return n=e.sent,console.log("user",r,"idTokenResult",n),e.next=22,p.a.post("http://localhost:8000/api/create",{authtoken:n.token}).then((function(e){console.log("CREATE OR UPDATE RES",e),g({type:"LOGGED_IN_USER",payload:{name:e.data.name,email:e.data.email,token:n.token,role:e.data.role,_id:e.data._id}})})).catch((function(e){return console.log("<<<<<<<<<<<<<OOO MAA GOO ERROR ///RegisterComplete///>>>>>>>>>>>>>")}));case 22:t.push("/");case 23:e.next=29;break;case 25:e.prev=25,e.t0=e.catch(7),console.log(e.t0),u.b.error(e.t0.message);case 29:case"end":return e.stop()}}),e,null,[[7,25]])})));return function(t){return e.apply(this,arguments)}}();return Object(r.jsx)("div",{className:"container p-5",children:Object(r.jsx)("div",{className:"row",children:Object(r.jsxs)("div",{className:"col-md-6 offset-md-3",children:[Object(r.jsx)("h4",{children:"Register Complete"}),Object(r.jsxs)("form",{onSubmit:x,children:[Object(r.jsx)("input",{type:"email",className:"form-control",value:b,onChange:function(e){return m(e.target.value)},disabled:!0}),Object(r.jsx)("input",{type:"password",className:"form-control",value:j,onChange:function(e){return O(e.target.value)},placeholder:"Password",autoFocus:!0}),Object(r.jsx)("br",{}),Object(r.jsx)("button",{type:"submit",className:"btn btn-raised",children:"Complete Registration"})]})]})})})}}}]);
//# sourceMappingURL=29.9e1dd440.chunk.js.map